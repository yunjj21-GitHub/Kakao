// 2021 KAKAO BLIND RECRUITMENT : 메뉴 리뉴얼
#include <string>
#include <vector>
#include <unordered_map>
#include <algorithm>

using namespace std;

unordered_map<string, int> result;

void comb(string order, string s, int num, int nxt) {
    if (s.size() == num) {
        result[s]++;
        return;
    }

    for (int i = nxt; i < order.size(); i++) {
        comb(order, s + order[i], num, i + 1);
    }
}

vector<string> solution(vector<string> orders, vector<int> course) {
    vector<string> answer;

    // 모든 orders를 사전식으로 정렬
    for (int i = 0; i < orders.size(); i++) {
        sort(orders[i].begin(), orders[i].end());
    }

    for(int num : course) {
        // 주어진 orders로 가능한 주문 조합을 num크기로 만듦
        result.clear();
        for (string order : orders) {
            if (order.size() < num) continue;

            comb(order, "", num, 0);
        }

        // 가장 많이 주문된 메뉴구성의 주문수를 구함
        int max_num = 2;
        for (auto res : result) {
            if (res.second > max_num) max_num = res.second;
        }

        // 가장 많이 주문된 메뉴구성을 answer에 push
        for (auto res : result) {
            if (res.second == max_num) answer.push_back(res.first);
        }
    }

    sort(answer.begin(), answer.end()); // 답안 오름차순 정렬 (사전식)
    return answer;
}